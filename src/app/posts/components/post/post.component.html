<div class="post-container">
  <!-- Parte superior del post -->
  <div class="d-flex gap-3 mb-3">
    <ng-container *ngIf="institution">
      <img
        [src]="institution.logo_url"
        [alt]="'Foto de perfil'"
        class="img-profile"
      />
      <div class="info-user">
        <h2>{{ institution.name }}</h2>
        <p >{{calculateTimePost()}}</p>
      </div>
    </ng-container>
  </div>
  <!-- Contenido del post -->
  <p *ngIf="post.content.text != ''" class="text-post">{{post.content.text}}</p>
  <!-- Visualizar imagenes -->
  <ng-container *ngIf="post.content.media.length > 0 && typeImages.includes(post.content.media[0].type)">
    <div class="post-images" [ngClass]="getGridClass(images)">
      <ng-container *ngFor="let image of images; let i = index">
        <!-- Mostrar las primeras 3 im치genes directamente -->
        <img *ngIf="i < 3 || images.length == 4" [src]="image" alt="Imagen del post">
        <!-- Quinta imagen: Con superposici칩n si hay m치s im치genes -->
        <div 
          *ngIf="i === 3 && images.length > 4" 
          class="more" 
          [title]="images.length - 4"
          >
          <img [src]="image" alt="Imagen del post">
          <div class="overlay"></div>
        </div>
      </ng-container>
    </div>
  </ng-container>
  <!-- Visualizar documento -->
  <ng-container *ngIf="post.content.media.length > 0 && post.content.media[0].type == 'document'">
    <a [href]="post.content.media[0].path" target="_blank" class="text-decoration-none">
      <div class="doc-post d-flex flex-row">
        <div class="icon-doc d-flex align-items-center justify-content-center">
          <img src="../../../../assets/File PDF.png" alt="Document">
        </div>
        <div class="details-doc d-flex flex-column align-center">
          <div class="type-doc d-flex align-center"><p class="m-0">{{ getTypeDoc(post.content.media[0].type) }}</p></div>
          <div class="name-doc"><p class="fw-bold m-0" >{{ post.content.media[0].name }}</p></div>
        </div>
      </div>
    </a>
  </ng-container>

  <!-- Visualizar videos -->
   <ng-container *ngIf="post.content.media.length > 0 && post.content.media[0].type == 'video'">
    <div class="video-post">
      <video [src]="post.content.media[0].path" controls ></video>
    </div>
   </ng-container>

  <div class="reactions-comments d-flex justify-content-between" 
  *ngIf="amountReactions() > 0 || amountComments() > 0">
    <div class="likes" *ngIf="amountReactions() > 0">
      <i class="fa-solid fa-thumbs-up" *ngIf="getReactions(0) == 'thumbs-up'"></i>
      <i class="fa-solid fa-heart" *ngIf="getReactions(0) == 'red-heart'"></i>
      <img src="../../../../assets/crying-face.png" alt="" class="fa-face-sad-tear" *ngIf="getReactions(0) == 'crying-face'">
      <img src="../../../../assets/angry-face.png" alt="" class="fa-face-angry" *ngIf="getReactions(0) == 'angry-face'">

      <i class="fa-solid fa-thumbs-up" *ngIf="getReactions(1) == 'thumbs-up'"></i>
      <i class="fa-solid fa-heart" *ngIf="getReactions(1) == 'red-heart'"></i>
      <img src="../../../../assets/crying-face.png" alt="" class="fa-face-sad-tear" *ngIf="getReactions(1) == 'crying-face'">
      <img src="../../../../assets/angry-face.png" alt="" class="fa-face-angry" *ngIf="getReactions(1) == 'angry-face'">
      <span>{{ totalReactions() }}</span>
    </div>    
    <div class="comments" *ngIf="amountComments() > 0">
      <span>{{ post.commentCounter.totalComments }}</span>
      <i class="bi bi-chat-fill"></i>
    </div>
  </div>
  <hr>
  <div class="bottuns d-flex justify-content-evenly m-2">
    <!-- Boton de Reaccionar -->
    <button type="button" class="btn" [ngClass]="myReaction.class" id="btn-like" (click)="reactUserBoton(post.uuid)">
      <i class="{{ myReaction.emoji }}" *ngIf="myReaction.class == 'thumbs-up' || myReaction.class == 'red-heart' || myReaction.class == 'default'"></i>
      <img src="../../../../assets/{{myReaction.class}}.png" class="{{myReaction.class}}" *ngIf="myReaction.class == 'crying-face' || myReaction.class == 'angry-face'">
      <span class="ms-1">{{ myReaction.name }}</span>
      <!-- Opciones de reaccion  -->
      <div class="option-reactions">
        <i class="fa-solid fa-thumbs-up" (click)="clickReaction(post.uuid, 'thumbs-up')"></i>
        <i class="fa-solid fa-heart" (click)="clickReaction(post.uuid, 'red-heart')"></i>
        <img src="../../../../assets/crying-face.png" class="crying-face" (click)="clickReaction(post.uuid, 'crying-face')">
        <img src="../../../../assets/angry-face.png" class="angry-face" (click)="clickReaction(post.uuid, 'angry-face')">
      </div>
    </button>
    <button type="button" class="btn btn-secondary" disabled>
      <i class="bi bi-chat-left-text"></i>
      Comentar</button>
    <button type="button" class="btn btn-secondary" disabled>
      <i class="fa-solid fa-share"></i>
      Compartir</button>
  </div>
  
  <!-- Popup de comentarios -->
  <!-- <app-comments  
  *ngIf="showComments"  
  [postImage]="post.content.media[0]?.path"  
  [postAuthor]="institution.name"  
  [postTime]="calculateTimePost()"  
  [postDescription]="post.content.text"  
  (close)="closeComments()"  
></app-comments>   -->
</div>
